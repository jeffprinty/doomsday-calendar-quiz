import{n as J,r as h,R as x,j as a,o as U,D as _,p as z,I as Z,k as E,l as R}from"./index-Ikhn2pgC.js";function W(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=W(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function M(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=W(t))&&(r&&(r+=" "),r+=e);return r}const G=(t,e,n,r,s)=>{const i=s-r;if(i===0)return[];const o=n*Math.cos(r)+t,u=n*Math.sin(r)+e,d=n*Math.cos(s)+t,f=n*Math.sin(s)+e,l=Math.abs(i)<=Math.PI?"0":"1",c=i<0?"0":"1";return[["M",o,u],["A",n,n,0,l,c,d,f]]};var ee=G;const te=J(ee);function P(t){return t*Math.PI/180}function $(t,e,n){return t>n?n:t<e?e:t}function A(t,e){return e/100*t}function F(t,e){return t+e/2}function L(t,e){const n=P(t);return{dx:e*Math.cos(n),dy:e*Math.sin(n)}}function T(t){return typeof t=="number"}function N(t,e){return typeof t=="function"?t(e):t}function ne(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n].value;return e}function re({data:t,lengthAngle:e,totalValue:n,paddingAngle:r,startAngle:s}){const i=n||ne(t),o=$(e,-360,360),u=Math.abs(o)===360?t.length:t.length-1,d=Math.abs(r)*Math.sign(e),f=d*u,l=o-f;let c=0;const y=[];for(let v=0;v<t.length;v++){const k=t[v],m=i===0?0:k.value/i*100,b=A(l,m),w=c+s;c=c+b+d,y.push(Object.assign({percentage:m,startAngle:w,degrees:b},k))}return y}function se({renderLabel:t,labelProps:e}){const n=t(e);if(typeof n=="string"||typeof n=="number"){const{dataEntry:r,dataIndex:s,...i}=e;return x.createElement("text",{dominantBaseline:"central",...i},n)}return x.isValidElement(n)?n:null}function ae(t){return Math.round((t+Number.EPSILON)*1e14)/1e14}function ie({labelPosition:t,lineWidth:e,labelHorizontalShift:n}){const r=ae(n);if(r===0)return"middle";if(t>100)return r>0?"start":"end";const s=100-e;return t<s?r>0?"end":"start":"middle"}function oe(t,e){return t.map((n,r)=>{const s=N(e.segmentsShift,r)??0,i=A(e.radius,e.labelPosition)+s,{dx:o,dy:u}=L(F(n.startAngle,n.degrees),i);return{x:e.center[0],y:e.center[1],dx:o,dy:u,textAnchor:ie({labelPosition:e.labelPosition,lineWidth:e.lineWidth,labelHorizontalShift:o}),dataEntry:n,dataIndex:r,style:N(e.labelStyle,r)}})}function le(t,e){const{label:n}=e;if(n)return oe(t,e).map((r,s)=>x.createElement(se,{key:`label-${r.dataEntry.key||s}`,renderLabel:n,labelProps:r}))}function ce(t,e,n,r,s){const i=$(r,-359.999,359.999);return te(t,e,s,P(n),P(n+i)).map(o=>o.join(" ")).join(" ")}function B({cx:t,cy:e,lengthAngle:n,lineWidth:r,radius:s,shift:i=0,reveal:o,rounded:u,startAngle:d,title:f,...l}){const c=s-r/2,{dx:y,dy:v}=L(F(d,n),i),k=ce(t+y,e+v,d,n,c);let m,b;if(T(o)){const w=P(c)*n;m=Math.abs(w),b=m-A(m,o)}return x.createElement("path",{d:k,fill:"none",strokeWidth:r,strokeDasharray:m,strokeDashoffset:b,strokeLinecap:u?"round":void 0,...l},f&&x.createElement("title",null,f))}function ue(t,e,n){let r=`stroke-dashoffset ${t}ms ${e}`;return n&&n.transition&&(r=`${r},${n.transition}`),{transition:r}}function de({reveal:t,animate:e}){return e&&!T(t)?100:t}function D(t,e){return t&&(n=>{t(n,e)})}function fe(t,e,n){const r=n??de(e),{radius:s,center:[i,o]}=e,u=A(s,e.lineWidth),d=t.map((f,l)=>{const c=N(e.segmentsStyle,l);return x.createElement(B,{cx:i,cy:o,key:f.key||l,lengthAngle:f.degrees,lineWidth:u,radius:s,rounded:e.rounded,reveal:r,shift:N(e.segmentsShift,l),startAngle:f.startAngle,title:f.title,style:Object.assign({},c,e.animate&&ue(e.animationDuration,e.animationEasing,c)),stroke:f.color,tabIndex:e.segmentsTabIndex,onBlur:D(e.onBlur,l),onClick:D(e.onClick,l),onFocus:D(e.onFocus,l),onKeyDown:D(e.onKeyDown,l),onMouseOver:D(e.onMouseOver,l),onMouseOut:D(e.onMouseOut,l)})});return e.background&&d.unshift(x.createElement(B,{cx:i,cy:o,key:"bg",lengthAngle:e.lengthAngle,lineWidth:u,radius:s,rounded:e.rounded,startAngle:e.startAngle,stroke:e.background})),d}const I={animationDuration:500,animationEasing:"ease-out",center:[50,50],data:[],labelPosition:50,lengthAngle:360,lineWidth:100,paddingAngle:0,radius:50,startAngle:0,viewBoxSize:[100,100]};function me(t){const e=Object.assign({},I,t);let n;for(n in I)t[n]===void 0&&(e[n]=I[n]);return e}function ge(t){const e=me(t),[n,r]=h.useState(e.animate?0:null);h.useEffect(()=>{e.animate&&r(null)},[]);const s=re(e);return x.createElement("svg",{viewBox:`0 0 ${e.viewBoxSize[0]} ${e.viewBoxSize[1]}`,width:"100%",height:"100%",className:e.className,style:e.style},fe(s,e,n),le(s,e),e.children)}function q({className:t,children:e,onClick:n,...r}){return a.jsx("button",{type:"button",className:M(["rounded-xl bg-accent-primary py-2 text-xl transition-colors hover:bg-accent-primary-state focus:bg-accent-primary-state disabled:bg-blue-900 disabled:text-slate-400",t]),onClick:n,...r,children:e})}const V=({children:t})=>a.jsx("section",{className:"container flex h-full w-full flex-col items-center justify-start border border-tertiary bg-secondary lg:w-2/3",children:t}),p=({correctDay:t,daySelected:e,disabled:n=!1,onDayClick:r})=>a.jsx("div",{className:"grid w-full grid-cols-7 pt-6",children:U.map(s=>{const i=t===s,o=e===s,u=e!==t;return a.jsxs(q,{className:M(["quiz__day-of-week mx-1 h-24 px-1 text-center",u&&o&&"disabled:bg-red-900",i&&"disabled:bg-green-600 disabled:text-black"]),"data-correct-day":i,disabled:n,onClick:()=>r(s),children:[s,i&&a.jsx("span",{className:"correct-indicator",children:"✅"})]},s)})}),he=({dateToGuess:t,getNextDate:e,onIncorrectGuess:n})=>{const[r,s]=h.useState(_.now()),[i,o]=h.useState([]);console.log("answerTimes",i);const[u,d]=h.useState(),[f,l]=h.useState(),[c,y]=h.useState(),[v,k]=h.useState([0,0]),[m,b]=h.useState(!0),w=(t==null?void 0:t.toFormat(z))||"",Q=()=>{const g=e();console.log("TODO, do I need this?",g.toISO()),s(_.now()),b(!0),d(void 0),y(void 0)},K=g=>{if(!t)return;l(g);const S=t.toFormat("ccc"),j=S===g;if(k(([O,C])=>j?[O+1,C]:[O,C+1]),y(j),j||n(t),r){const C=Z.fromDateTimes(r,_.now()).length("seconds");C&&o(H=>[...H,[C,j,t]])}b(!1),d(S)},[X,Y]=v;return a.jsxs(V,{children:[a.jsxs("div",{id:"quiz__top-bit",children:[a.jsx("div",{className:"flex w-full flex-row items-center justify-center bg-indigo-900 py-2 md:rounded-bl-2xl md:rounded-br-2xl",children:a.jsx("h1",{className:"text-center text-3xl",children:"Doomsday Calendar Quiz"})}),a.jsxs("div",{id:"quiz__results",className:"grid h-48 w-full grid-cols-2 flex-row items-start justify-between bg-indigo-800 bg-opacity-40",children:[a.jsx("div",{className:"flex h-48 flex-col items-center justify-center px-8",children:a.jsx(ge,{label:({dataEntry:g})=>`${Math.round(g.percentage)}%`,data:[{title:"Correct",value:X,color:"rgb(22 163 74/var(--tw-bg-opacity,1))"},{title:"Incorrect",value:Y,color:"#C13C37"}]})}),a.jsx("div",{className:"flex h-48 flex-col justify-start overflow-y-auto",children:a.jsx("ul",{className:"w-full",children:[...i].reverse().map(([g,S,j])=>a.jsxs("li",{className:M("flex w-full flex-row justify-between bg-opacity-40 px-2",S?E:R),children:[a.jsx("span",{children:g}),a.jsxs("span",{children:[j.toFormat(z)===w&&"⚪️",j.toFormat("MMM dd, yy")]})]},`${g}_${S}`))})})]})]}),a.jsxs("div",{id:"quiz__bottom-bit",className:"",children:[a.jsxs("div",{id:"quiz__date-to-guess",className:M(["my-10 flex w-full flex-col items-center justify-center pb-6 pt-4 text-center",c===void 0&&"bg-gray-600",c===!0&&E,c===!1&&R]),children:[a.jsx("span",{className:"",children:"What day of the week is:"}),!!t&&a.jsx("h2",{className:"text-4xl",children:w})]}),a.jsxs("div",{id:"quiz__actions",children:[a.jsx(p,{correctDay:u,daySelected:f,onDayClick:K}),a.jsx("div",{className:"flex-row items-center justify-center p-2",children:a.jsx(q,{className:"my-2 h-16 w-full",disabled:m,onClick:Q,children:"New Date"})})]})]})]})},xe=Object.freeze(Object.defineProperty({__proto__:null,DayOfWeekGuesser:p,PageContainer:V,default:he},Symbol.toStringTag,{value:"Module"}));export{q as B,p as D,M as c,xe as d};
